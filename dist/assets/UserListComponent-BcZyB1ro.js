import{u as G,b as H,r as i,j as e,L as M}from"./index-DG-3HkhA.js";const f=[{id:1,email:"george.bluth@reqres.in",first_name:"George",last_name:"Bluth",avatar:"https://reqres.in/img/faces/1-image.jpg"},{id:2,email:"janet.weaver@reqres.in",first_name:"Janet",last_name:"Weaver",avatar:"https://reqres.in/img/faces/2-image.jpg"},{id:3,email:"emma.wong@reqres.in",first_name:"Emma",last_name:"Wong",avatar:"https://reqres.in/img/faces/3-image.jpg"},{id:4,email:"eve.holt@reqres.in",first_name:"Eve",last_name:"Holt",avatar:"https://reqres.in/img/faces/4-image.jpg"},{id:5,email:"charles.morris@reqres.in",first_name:"Charles",last_name:"Morris",avatar:"https://reqres.in/img/faces/5-image.jpg"},{id:6,email:"tracey.ramos@reqres.in",first_name:"Tracey",last_name:"Ramos",avatar:"https://reqres.in/img/faces/6-image.jpg"},{id:7,email:"michael.lawson@reqres.in",first_name:"Michael",last_name:"Lawson",avatar:"https://reqres.in/img/faces/7-image.jpg"},{id:8,email:"lindsay.ferguson@reqres.in",first_name:"Lindsay",last_name:"Ferguson",avatar:"https://reqres.in/img/faces/8-image.jpg"},{id:9,email:"tobias.funke@reqres.in",first_name:"Tobias",last_name:"Funke",avatar:"https://reqres.in/img/faces/9-image.jpg"},{id:10,email:"byron.fields@reqres.in",first_name:"Byron",last_name:"Fields",avatar:"https://reqres.in/img/faces/10-image.jpg"},{id:11,email:"george.edwards@reqres.in",first_name:"George",last_name:"Edwards",avatar:"https://reqres.in/img/faces/11-image.jpg"},{id:12,email:"rachel.howell@reqres.in",first_name:"Rachel",last_name:"Howell",avatar:"https://reqres.in/img/faces/12-image.jpg"}];function W(){const{t:a}=G(),N=H(),[A,x]=i.useState([]),[b,v]=i.useState(!0),[_,y]=i.useState(!1),[w,j]=i.useState(null),[k,g]=i.useState(null),[m,q]=i.useState(""),[l,C]=i.useState(1),[d,$]=i.useState(1),[S,u]=i.useState(0),n=6,o=i.useCallback(async(s,t=!1)=>{t?y(!0):v(!0),j(null);try{const r=await fetch(`https://reqres.in/api/users?page=${s}&per_page=${n}`);if(!r.ok)throw new Error("API not available");const c=await r.json();if(c.data&&Array.isArray(c.data))x(c.data),$(c.total_pages),u(c.total),C(s);else throw new Error("Invalid response format")}catch{console.log("API unavailable, using mock data");const r=(s-1)*n,c=r+n,D=f.slice(r,c);x(D),$(Math.ceil(f.length/n)),u(f.length),C(s)}finally{v(!1),y(!1)}},[n]);i.useEffect(()=>{o(1)},[o]);const P=()=>{o(l,!0)},R=s=>{q(s.target.value)},T=()=>{q("")},p=s=>{s>=1&&s<=d&&o(s)},E=s=>{N(`/users/${s.id}`)},L=s=>{N(`/users/${s.id}/edit`)},I=async s=>{if(window.confirm(a("user.delete.message",{name:`${s.first_name} ${s.last_name}`})))try{await fetch(`https://reqres.in/api/users/${s.id}`,{method:"DELETE"}).catch(()=>{}),g(a("user.deleted.success",{name:`${s.first_name} ${s.last_name}`})),x(t=>t.filter(r=>r.id!==s.id)),u(t=>t-1),setTimeout(()=>g(null),5e3)}catch{j(a("error.unknown"))}},h=A.filter(s=>{if(!m)return!0;const t=m.toLowerCase();return s.first_name.toLowerCase().includes(t)||s.last_name.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)}),U=(s,t)=>`${s.charAt(0)}${t.charAt(0)}`.toUpperCase(),F=(l-1)*n+1,B=Math.min(l*n,S);return e.jsxs("div",{className:"user-list-page container-fluid py-4",children:[e.jsxs("div",{className:"page-header d-flex justify-content-between align-items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mb-1",children:a("user.list.title")}),e.jsx("p",{className:"text-muted mb-0",children:a("user.list.subtitle")})]}),e.jsxs(M,{to:"/users/new",className:"btn btn-primary",children:[e.jsx("i",{className:"bi bi-plus-lg me-2"}),a("user.list.create")]})]}),k&&e.jsxs("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),k,e.jsx("button",{type:"button",className:"btn-close",onClick:()=>g(null)})]}),w&&e.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[e.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),w,e.jsx("button",{type:"button",className:"btn-close",onClick:()=>j(null)})]}),e.jsx("div",{className:"card mb-4",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"search-box position-relative",children:[e.jsx("i",{className:"bi bi-search search-icon"}),e.jsx("input",{type:"text",className:"form-control search-input",placeholder:a("user.list.search.placeholder"),value:m,onChange:R}),m&&e.jsx("button",{type:"button",className:"btn btn-link clear-search",onClick:T,children:e.jsx("i",{className:"bi bi-x-lg"})})]})}),e.jsx("div",{className:"col-md-4 text-md-end mt-3 mt-md-0",children:e.jsxs("button",{className:"btn btn-outline-secondary",onClick:P,disabled:_,children:[e.jsx("i",{className:`bi bi-arrow-clockwise ${_?"spin":""}`}),e.jsx("span",{className:"ms-2",children:a("common.refresh")})]})})]})})}),b&&e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:a("common.loading")})}),e.jsx("p",{className:"mt-3 text-muted",children:a("common.loading")})]}),!b&&h.length===0&&e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center py-5",children:[e.jsx("i",{className:"bi bi-people display-1 text-muted opacity-50"}),e.jsx("h4",{className:"mt-3 text-muted",children:a("user.list.no.results")}),e.jsx("p",{className:"text-muted",children:a(m?"user.list.empty.search":"user.list.empty.message")}),!m&&e.jsxs(M,{to:"/users/new",className:"btn btn-primary mt-3",children:[e.jsx("i",{className:"bi bi-plus-lg me-2"}),a("user.list.create")]})]})}),!b&&h.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card d-none d-md-block",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:a("table.id")}),e.jsx("th",{children:a("table.avatar")}),e.jsx("th",{children:a("table.name")}),e.jsx("th",{children:a("table.email")}),e.jsx("th",{className:"text-end",children:a("table.actions")})]})}),e.jsx("tbody",{children:h.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:["#",s.id]}),e.jsx("td",{children:s.avatar?e.jsx("img",{src:s.avatar,alt:`${s.first_name} ${s.last_name}`,className:"user-avatar"}):e.jsx("div",{className:"user-avatar avatar-initials",children:U(s.first_name,s.last_name)})}),e.jsx("td",{children:e.jsxs("strong",{children:[s.first_name," ",s.last_name]})}),e.jsx("td",{children:s.email}),e.jsx("td",{className:"text-end",children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx("button",{className:"btn btn-outline-primary",onClick:()=>E(s),title:a("common.view"),children:e.jsx("i",{className:"bi bi-eye"})}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>L(s),title:a("common.edit"),children:e.jsx("i",{className:"bi bi-pencil"})}),e.jsx("button",{className:"btn btn-outline-danger",onClick:()=>I(s),title:a("common.delete"),children:e.jsx("i",{className:"bi bi-trash"})})]})})]},s.id))})]})})}),e.jsx("div",{className:"d-md-none",children:h.map(s=>e.jsx("div",{className:"card mb-3 user-card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[s.avatar?e.jsx("img",{src:s.avatar,alt:`${s.first_name} ${s.last_name}`,className:"user-avatar-lg"}):e.jsx("div",{className:"user-avatar-lg avatar-initials",children:U(s.first_name,s.last_name)}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("h6",{className:"mb-1",children:[s.first_name," ",s.last_name]}),e.jsx("small",{className:"text-muted",children:s.email})]})]}),e.jsxs("div",{className:"mt-3 d-flex gap-2",children:[e.jsxs("button",{className:"btn btn-outline-primary btn-sm flex-fill",onClick:()=>E(s),children:[e.jsx("i",{className:"bi bi-eye me-1"}),a("common.view")]}),e.jsxs("button",{className:"btn btn-outline-secondary btn-sm flex-fill",onClick:()=>L(s),children:[e.jsx("i",{className:"bi bi-pencil me-1"}),a("common.edit")]}),e.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>I(s),children:e.jsx("i",{className:"bi bi-trash"})})]})]})},s.id))}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-4",children:[e.jsx("span",{className:"text-muted",children:a("user.list.showing",{start:F,end:B,total:S})}),e.jsx("nav",{children:e.jsxs("ul",{className:"pagination mb-0",children:[e.jsx("li",{className:`page-item ${l===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>p(l-1),disabled:l===1,children:e.jsx("i",{className:"bi bi-chevron-left"})})}),Array.from({length:d},(s,t)=>t+1).map(s=>e.jsx("li",{className:`page-item ${s===l?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>p(s),children:s})},s)),e.jsx("li",{className:`page-item ${l===d?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>p(l+1),disabled:l===d,children:e.jsx("i",{className:"bi bi-chevron-right"})})})]})})]})]})]})}export{W as UserListComponent};
