import{u as Q,b as z,r as l,j as e,L as E}from"./index-hLLwv5Ut.js";function V(){const{t:a}=Q(),N=z(),[I,p]=l.useState([]),[h,g]=l.useState(!0),[v,f]=l.useState(!1),[y,c]=l.useState(null),[w,x]=l.useState(null),[n,k]=l.useState(""),[i,U]=l.useState(1),[r,P]=l.useState(1),[C,R]=l.useState(0),d=6,m=l.useCallback(async(s,t=!1)=>{t?f(!0):g(!0),c(null);try{const u=await(await fetch(`https://reqres.in/api/users?page=${s}&per_page=${d}`)).json();p(u.data),P(u.total_pages),R(u.total),U(s)}catch{c(a("error.network"))}finally{g(!1),f(!1)}},[a,d]);l.useEffect(()=>{m(1)},[m]);const T=()=>{m(i,!0)},q=s=>{k(s.target.value)},A=()=>{k("")},b=s=>{s>=1&&s<=r&&m(s)},_=s=>{N(`/users/${s.id}`)},$=s=>{N(`/users/${s.id}/edit`)},S=async s=>{if(window.confirm(a("user.delete.message",{name:`${s.first_name} ${s.last_name}`})))try{await fetch(`https://reqres.in/api/users/${s.id}`,{method:"DELETE"}),x(a("user.deleted.success",{name:`${s.first_name} ${s.last_name}`})),p(t=>t.filter(j=>j.id!==s.id)),setTimeout(()=>x(null),5e3)}catch{c(a("error.unknown"))}},o=I.filter(s=>{if(!n)return!0;const t=n.toLowerCase();return s.first_name.toLowerCase().includes(t)||s.last_name.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)}),L=(s,t)=>`${s.charAt(0)}${t.charAt(0)}`.toUpperCase(),M=(i-1)*d+1,D=Math.min(i*d,C);return e.jsxs("div",{className:"user-list-page container-fluid py-4",children:[e.jsxs("div",{className:"page-header d-flex justify-content-between align-items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mb-1",children:a("user.list.title")}),e.jsx("p",{className:"text-muted mb-0",children:a("user.list.subtitle")})]}),e.jsxs(E,{to:"/users/new",className:"btn btn-primary",children:[e.jsx("i",{className:"bi bi-plus-lg me-2"}),a("user.list.create")]})]}),w&&e.jsxs("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),w,e.jsx("button",{type:"button",className:"btn-close",onClick:()=>x(null)})]}),y&&e.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[e.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),y,e.jsx("button",{type:"button",className:"btn-close",onClick:()=>c(null)})]}),e.jsx("div",{className:"card mb-4",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"search-box position-relative",children:[e.jsx("i",{className:"bi bi-search search-icon"}),e.jsx("input",{type:"text",className:"form-control search-input",placeholder:a("user.list.search.placeholder"),value:n,onChange:q}),n&&e.jsx("button",{type:"button",className:"btn btn-link clear-search",onClick:A,children:e.jsx("i",{className:"bi bi-x-lg"})})]})}),e.jsx("div",{className:"col-md-4 text-md-end mt-3 mt-md-0",children:e.jsxs("button",{className:"btn btn-outline-secondary",onClick:T,disabled:v,children:[e.jsx("i",{className:`bi bi-arrow-clockwise ${v?"spin":""}`}),e.jsx("span",{className:"ms-2",children:a("common.refresh")})]})})]})})}),h&&e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:a("common.loading")})}),e.jsx("p",{className:"mt-3 text-muted",children:a("common.loading")})]}),!h&&o.length===0&&e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center py-5",children:[e.jsx("i",{className:"bi bi-people display-1 text-muted opacity-50"}),e.jsx("h4",{className:"mt-3 text-muted",children:a("user.list.no.results")}),e.jsx("p",{className:"text-muted",children:a(n?"user.list.empty.search":"user.list.empty.message")}),!n&&e.jsxs(E,{to:"/users/new",className:"btn btn-primary mt-3",children:[e.jsx("i",{className:"bi bi-plus-lg me-2"}),a("user.list.create")]})]})}),!h&&o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card d-none d-md-block",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:a("table.id")}),e.jsx("th",{children:a("table.avatar")}),e.jsx("th",{children:a("table.name")}),e.jsx("th",{children:a("table.email")}),e.jsx("th",{className:"text-end",children:a("table.actions")})]})}),e.jsx("tbody",{children:o.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:["#",s.id]}),e.jsx("td",{children:s.avatar?e.jsx("img",{src:s.avatar,alt:`${s.first_name} ${s.last_name}`,className:"user-avatar"}):e.jsx("div",{className:"user-avatar avatar-initials",children:L(s.first_name,s.last_name)})}),e.jsx("td",{children:e.jsxs("strong",{children:[s.first_name," ",s.last_name]})}),e.jsx("td",{children:s.email}),e.jsx("td",{className:"text-end",children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx("button",{className:"btn btn-outline-primary",onClick:()=>_(s),title:a("common.view"),children:e.jsx("i",{className:"bi bi-eye"})}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>$(s),title:a("common.edit"),children:e.jsx("i",{className:"bi bi-pencil"})}),e.jsx("button",{className:"btn btn-outline-danger",onClick:()=>S(s),title:a("common.delete"),children:e.jsx("i",{className:"bi bi-trash"})})]})})]},s.id))})]})})}),e.jsx("div",{className:"d-md-none",children:o.map(s=>e.jsx("div",{className:"card mb-3 user-card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[s.avatar?e.jsx("img",{src:s.avatar,alt:`${s.first_name} ${s.last_name}`,className:"user-avatar-lg"}):e.jsx("div",{className:"user-avatar-lg avatar-initials",children:L(s.first_name,s.last_name)}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("h6",{className:"mb-1",children:[s.first_name," ",s.last_name]}),e.jsx("small",{className:"text-muted",children:s.email})]})]}),e.jsxs("div",{className:"mt-3 d-flex gap-2",children:[e.jsxs("button",{className:"btn btn-outline-primary btn-sm flex-fill",onClick:()=>_(s),children:[e.jsx("i",{className:"bi bi-eye me-1"}),a("common.view")]}),e.jsxs("button",{className:"btn btn-outline-secondary btn-sm flex-fill",onClick:()=>$(s),children:[e.jsx("i",{className:"bi bi-pencil me-1"}),a("common.edit")]}),e.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>S(s),children:e.jsx("i",{className:"bi bi-trash"})})]})]})},s.id))}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-4",children:[e.jsx("span",{className:"text-muted",children:a("user.list.showing",{start:M,end:D,total:C})}),e.jsx("nav",{children:e.jsxs("ul",{className:"pagination mb-0",children:[e.jsx("li",{className:`page-item ${i===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>b(i-1),disabled:i===1,children:e.jsx("i",{className:"bi bi-chevron-left"})})}),Array.from({length:r},(s,t)=>t+1).map(s=>e.jsx("li",{className:`page-item ${s===i?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>b(s),children:s})},s)),e.jsx("li",{className:`page-item ${i===r?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>b(i+1),disabled:i===r,children:e.jsx("i",{className:"bi bi-chevron-right"})})})]})})]})]})]})}export{V as UserListComponent};
